# CNRS Root Directory .htaccess
# This file handles redirects from /CNRS/ to /CNRS/public/

<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Redirect /CNRS/ to /CNRS/public/ (similar to other projects)
    RewriteCond %{REQUEST_URI} ^/CNRS/?$
    RewriteRule ^(.*)$ /CNRS/public/ [R=301,L]
    
    # Handle requests to /CNRS/api -> /CNRS/public/api (for API calls)
    RewriteCond %{REQUEST_URI} ^/CNRS/api/(.*)$
    RewriteRule ^(.*)$ /CNRS/public/api/$1 [L]
    
    # Handle requests to /CNRS/something -> /CNRS/public/something
    RewriteCond %{REQUEST_URI} ^/CNRS/(.*)$
    RewriteCond %{REQUEST_URI} !^/CNRS/public/
    RewriteRule ^(.*)$ /CNRS/public/$1 [R=301,L]
</IfModule>

# Prevent directory listing
Options -Indexes

# Security headers
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
</IfModule>